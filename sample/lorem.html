<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<title>Places to visit in New York</title>
		<style type="text/css">
body {
  background: #e2e2e2;
  margin: 0;
  padding: 0;
}

.header_pic {
  width: 100%;
  position: relative;
}

.header_pic img {
  width: 100%;
}

.header_pic div.overlay {
  width: 100%;
  background-color: black;
  opacity:0.6;
  position: absolute;
  bottom: 0px;
  left: 0px;
  color: white;
}

.header_pic div.overlay div {
  padding: 10px 20px;
  font-size: 24px;
}

.footer {
  font-style: italic;
  color: gray;
  margin-top: 20px;
  border-top: solid 1px gray;
  padding-left: 10px;
}

.footer a {
  text-decoration: none;
  color: #444;
}

p {
  padding: 10px;
}
		</style>
		<script type="text/javascript">
		var _awac_;

function MockContainer(awac) {
  this.debug = true;
  this.values = {};
  this.varName = null;
  this.awac = awac;
}

MockContainer.prototype.setVarName = function(varName) {
  this.varName = varName;
};

MockContainer.prototype.toString = function() {
  return "{MockContainer var:"+this.varName+"}";
};

MockContainer.prototype.setTitle = function(title) {
  if (this.debug) console.log(this.varName+'.setTitle('+title+')');
  if (!document.title) document.title = title;
};

MockContainer.prototype.addNavDrawerItem = function(json) {
  if (this.debug) console.log(this.varName+'.addNavDrawerItem('+json+')');
};

MockContainer.prototype.addOptionsMenuItem = function(json) {
  if (this.debug) console.log(this.varName+'.addOptionsMenuItem('+json+')');
};

MockContainer.prototype.addActionBarItem = function(json) {
  if (this.debug) console.log(this.varName+'.addActionBarItem('+json+')');
};

MockContainer.prototype.startPage = function() {
  if (this.debug) console.log(this.varName+'.startPage()');
};

MockContainer.prototype.endPage = function() {
  if (this.debug) console.log(this.varName+'.endPage()');
  window.close();
};

MockContainer.prototype.unlockNavDrawer = function() {
  if (this.debug) console.log(this.varName+'.unlockNavDrawer()');
};

MockContainer.prototype.set = function(name,value) {
  if (this.debug) console.log(this.varName+'.set('+name+','+value+')');
  this.values[name] = value;
};

MockContainer.prototype.get = function(name) {
  var value = this.values[name];
  if (this.debug) console.log(this.varName+'.get('+name+')='+value);
  return value;
};

MockContainer.prototype.store = function(name,value) {
  if (this.debug) console.log(this.varName+'.store('+name+','+value+')');
  localStorage.setItem(name,value);
};

MockContainer.prototype.load = function(name) {
  var value = localStorage.getItem(name);
  if (this.debug) console.log(this.varName+'.load('+name+')='+value);
  return value;
};

MockContainer.prototype.openPage = function(tag,url,value) {
  if (this.debug) console.log(this.varName+'.openPage('+tag+','+url+','+value+')');
  window.open(url+'?initparam='+value,tag);
};

MockContainer.prototype.replacePage = function(tag,url,value,next) {
  if (this.debug) console.log(this.varName+'.replacePage('+tag+','+url+','+value+','+next+')');
  window.open(url+'?initparam='+value,tag);
};

MockContainer.prototype.newApp = function(url) {
  if (this.debug) console.log(this.varName+'.newApp('+url+')');
  window.location.href = url;
};

MockContainer.prototype.startPage = function() {
  if (this.debug) console.log(this.varName+'.startPage()');
};

MockContainer.prototype.endPage = function(value) {
  if (this.debug) console.log(this.varName+'.endPage('+value+')');
  //window.close();
};

MockContainer.prototype.showDialog = function(msg,ok,cancel) {
  if (this.debug) console.log(this.varName+'.showDialog('+msg+','+ok+','+cancel+')');
  var yes = confirm(msg);
  this.awac.fireDialogResult(yes);
};

MockContainer.prototype.alert = function(msg) {
  if (this.debug) console.log(this.varName+'.alert('+msg+')');
  alert(msg);
};

MockContainer.prototype.gotOnRefreshCB = function() {
  if (this.debug) console.log(this.varName+'.gotOnRefreshCB()');
};

MockContainer.prototype.gotOnBackPressedCB = function() {
  if (this.debug) console.log(this.varName+'.gotOnBackPressedCB()');
};

MockContainer.prototype.gotOnActionCB = function() {
  if (this.debug) console.log(this.varName+'.gotOnActionCB()');
};

MockContainer.prototype.gotOnPageCloseCB = function() {
  if (this.debug) console.log(this.varName+'.gotOnPageCloseCB()');
};

MockContainer.prototype.startRefresh = function() {
  if (this.debug) console.log(this.varName+'.startRefresh()');
};

MockContainer.prototype.endRefresh = function() {
  if (this.debug) console.log(this.varName+'.endRefresh()');
};

MockContainer.prototype.getStackDepth = function() {
  if (this.debug) console.log(this.varName+'.getStackDepth()=0');
  return 0;
};

MockContainer.prototype.getParam=function(name) {
  var href = window.location.href;
  var i = href.indexOf('?');
  if (i == -1) return null;
  href = '&'+href.substring(i+1);
  var p = '&'+name+'=';
  i = href.indexOf(p);
  if (i == -1) return null;
  href = href.substring(i+p.length);
  i = href.indexOf('&');
  if (i != -1) href = href.substring(0,i);
  return href;
};

MockContainer.prototype.getInitParam = function() {
  var value = this.getParam('initparam');
  if (this.debug) console.log(this.varName+'.getInitParam()='+value);
  return value;
};

MockContainer.prototype.getPageTag = function() {
  if (this.debug) console.log(this.varName+'.getPageTag()=default');
  return 'default';
};

function Awac(varName) {
  this.varName = varName ? varName : 'x';
  //console.log(this.varName+' = new Awac('+_awac_+')');
  this.container = _awac_ ? _awac_ : new MockContainer(this);
  this.container.setVarName(this.varName);
  //console.log(' - this.container='+this.container);
  this.ondialog = null;
  this.onrefresh = null;
  this.onresult = null;
  this.onaction = null;
  this.onpageclose = null;
  this.started = false;
  this.gottitle = false;
  this.debug = true;
}

Awac.prototype.toString = function() {
  return "{Awac var:"+this.varName+" loaded:"+this.loaded+" onresult:"+this.onresult+"}";
};

Awac.prototype.stringify = function(x) {
  if (!x) return 'null';
  var t = typeof(x);
  if (t === 'undefined') return 'null';
  if (t == 'string') return 'string:'+encodeURIComponent(x);
  if (t == 'number') return 'number:'+x;
  if (t == 'object' || t == 'array') return 'json:'+encodeURIComponent(JSON.stringify(x));
  return 'null';
};

Awac.prototype.parse = function(s) {
  if (!s) return null;
  if (typeof(s) === 'undefined') return null;
  if (s == 'null') return null;
  var i = s.indexOf(':');
  var t = s.substring(0,i);
  s = s.substring(i+1);
  if (t == 'string') return decodeURIComponent(s);
  if (t == 'number') return parseFloat(s);
  if (t == 'json') return JSON.parse(decodeURIComponent(s));
  return null;
};

Awac.prototype.setTitle = function(title) {
  this.container.setTitle(title);
  this.gottitle = true;
};

Awac.prototype.addNavDrawerItem = function(obj) {
  this.container.addNavDrawerItem(JSON.stringify(obj));
};

Awac.prototype.addOptionsMenuItem = function(obj) {
  this.container.addOptionsMenuItem(JSON.stringify(obj));
};

Awac.prototype.addActionBarItem = function(obj) {
  this.container.addActionBarItem(JSON.stringify(obj));
};

Awac.prototype.getStackDepth = function() {
  return this.container.getStackDepth();
};

Awac.prototype.unlockNavDrawer = function() {
  this.container.unlockNavDrawer();
};

Awac.prototype.set = function(name,value) {
  var v = this.stringify(value);
  this.container.set(name,v);
};

Awac.prototype.get = function(name) {
  var s = this.container.get(name);
  return this.parse(s);
};

Awac.prototype.store = function(name,value) {
  var v = this.stringify(value);
  this.container.store(name,v);
};

Awac.prototype.load = function(name) {
  var s = this.container.load(name);
  return this.parse(s);
};

Awac.prototype.getInitParam = function() {
  var s = this.container.getInitParam();
  return this.parse(s);
};

Awac.prototype.getPageTag = function() {
  return this.container.getPageTag();
};

/* Call this to make the web page visible */
Awac.prototype.startPage = function() {
  if (!this.started) {
    this.started = true;
    if (!this.gottitle) {
      var t = document.title;
      if (t) this.setTitle(t);
    }
    this.container.startPage();
  }
};

/* End displaying the page and pop it off the stack */
Awac.prototype.endPage = function(value) {
  var v = this.stringify(value);
  this.container.endPage(v);
};

/* Pop a new page onto the stack */
Awac.prototype.openPage = function(tag,url,value) {
  var v = this.stringify(value);
  this.container.openPage(tag,url,v);
};

/* Replace page on top of the stack */
Awac.prototype.replacePage = function(tag,url,value,next) {
   var v = this.stringify(value);
  this.container.replacePage(tag,url,v,next);
};

Awac.prototype.newApp = function(url) {
  this.container.newApp(url);
};

Awac.prototype.alert = function(msg) {
  this.container.alert(msg);
};

Awac.prototype.dialog = function(msg,ok,cancel,cb) {
  this.ondialog = cb;
  this.container.showDialog(msg,ok,cancel);
};

// set callbacks

Awac.prototype.setOnRefresh = function(cb) {
  this.container.gotOnRefreshCB();
  this.onrefresh = cb;
};

Awac.prototype.setOnResult = function(cb) {
  this.container.gotOnResultCB();
  this.onresult = cb;
};

Awac.prototype.setOnBackPressed = function(cb) {
  this.container.gotOnBackPressedCB();
  this.onbackpressed = cb;
};

Awac.prototype.setOnAction = function(cb) {
  this.container.gotOnActionCB();
  this.onaction = cb;
};

Awac.prototype.setOnPageClose = function(cb) {
  this.container.gotOnPageCloseCB();
  this.onpageclose = cb;
};

// fire callbacks

Awac.prototype.fireDialogResult = function(ok) {
  if (this.debug) console.log('Awac.fireDialogResult('+ok+')');
  if (this.ondialog) this.ondialog(ok);
  this.ondialog = null;
};

Awac.prototype.fireBackPressed = function() {
  if (this.debug) console.log('Awac.fireBackPressed()');
  if (this.onbackpressed) this.onbackpressed();
};

Awac.prototype.fireRefresh = function() {
  if (this.debug) console.log('Awac.fireRefresh()');
  if (this.onrefresh) this.onrefresh();
};

Awac.prototype.fireAction = function(action) {
  if (this.debug) console.log('Awac.fireAction('+action+')');
  if (this.onaction) this.onaction(action);
};

Awac.prototype.firePageClose = function(tag,ok,value) {
  if (this.debug) console.log('Awac.firePageClose('+tag+','+ok+','+value+')');
  if (this.onpageclose) this.onpageclose(tag,ok,this.parse(value));
};

//

Awac.prototype.startRefresh = function() {
  this.container.startRefresh();
};

Awac.prototype.endRefresh = function() {
  this.container.endRefresh();
};


		  var app;
		  function doOnLoad() { app = new Awac('app'); app.startPage(); }
		</script>
	</head>
	<body onload="doOnLoad();">

    <div onclick="app.replacePage('sample','lorem.html',null,true);">NEXT</div>
    
	  <p>The High Line (also known as the High Line Park) is a 1.45-mile-long (2.33 km) New York City linear park built in Manhattan on an elevated section of a
	  disused New York Central Railroad spur called the West Side Line. Inspired by the 3-mile (4.8-kilometer) Promenade plantée, a similar project in Paris completed
	  in 1993, the High Line has been redesigned and planted as an aerial greenway and rails-to-trails park.</p>

    <p>The High Line Park uses the disused southern portion of the West Side Line running to the Lower West Side of Manhattan. It runs from Gansevoort Street –
    three blocks below 14th Street – in the Meatpacking District, through Chelsea, to the northern edge of the West Side Yard on 34th Street near the Javits
    Convention Center. An unopened spur extends above 30th Street to Tenth Avenue.[5] Formerly, the High Line went as far south as a railroad terminal to
    Spring Street just north of Canal Street, however, most of the lower section was demolished in 1960, with another small portion of the lower section being
    demolished in 1991.</p>

    <p>Data from <a href="http://en.wikipedia.org/wiki/High_Line_%28New_York_City%29">Wikipedia</a></p>

    <div class="footer"><a target="_blank" href="http://acuth.github.io/sample/highline.html">http://acuth.github.io/sample/highline.html</a></div>
	</body>
</html>