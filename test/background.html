<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<script src="../awac/awac.js" type="text/javascript"></script>
		<script type="text/javascript">
 var _awac = null;
 var _startTime = null;
 
 function doOnLoad() {
    _startTime = new Date();
    _awac = new Awac('_awac');
    _awac.setOnMessage(onMessage);
    _awac.startPage();
    console.log('------ background page loaded');
 }

 function onMessage(msgId,val) {
    console.log('------ background got msg-id='+msgId+' value='+val);
    if (val == 'status') {
      var r = 'BACKGROUND STATUS<br/>';
      r += 'started:'+_startDate;
      _awac.replyMessage(msgId,r);
      return;
    }
    setTimeout(function() {
        console.log('------ background sending response msg-id='+msgId);
        var reply = {};
        reply.msg = val;
        reply.ok = true;
        _awac.replyMessage(msgId,reply);
    },5000);
 }
      </script>
  </head>
  <body onload="doOnLoad();">
  </body>
</html>