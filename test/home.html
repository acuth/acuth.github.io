<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link type="text/css" rel="stylesheet" href="../css/reset.css" />
		<style type="text/css">
body {
  background: #e2e2e2;
}

h1 {
  font-weight: bold;
  text-align: center;
}

div#log, div.btn {
  width: 80%;
  margin-left: auto;
  margin-right: auto;
  margin-top: 20px;
  padding: 20px;

}

div#log {
  background: #888;
  color: yellow;
  font-size: 80%;
  font-family: monospace;
}

div.btn {
  text-align: center;
	background-color:#44c767;
	-moz-border-radius:8px;
	-webkit-border-radius:8px;
	border-radius:8px;
	border:1px solid #18ab29;
	cursor:pointer;
	color:#ffffff;
	font-family:arial;
	font-size:17px;
	text-decoration:none;
	text-shadow:0px 1px 0px #2f6627;
}

div.btn:hover {
	background-color:#5cbf2a;
}

div.btn:active {
	position:relative;
	top:1px;
}

		</style>
		<script src="../js/jquery.min.js" type="text/javascript"></script>
		<script src="../js/dateformat.js" type="text/javascript"></script>
		<script src="../js/awac.js?v=7" type="text/javascript"></script>
		<script type="text/javascript">
var awac = null;
var isRoot = false;

function log(msg,addDate) {
  msg = '<br/>'+msg;
  if (addDate) msg += ' @ '+(new Date()).format('HH:MM:ss');
  $('#log').append(msg);
}

function onResult(ok) {
  log('result from page:'+ok,true);
}

function onRefresh() {
  log('on refresh',true);
  awac.finishRefresh();
}

function onBackPressed() {
  log('on back pressed',true);
  awac.toast("You can never go back");
  $('#finish-page').show();
  awac.loading("time to exit");
}

function newPage(name) {
  awac.loading();
  if (isRoot) $('#finish-page').hide();
  log('new page',true);
  awac.newPage(name);
}

function finishPage() {
  log('finish page',true);
  awac.finishPage();
}

function init() {
  awac = new Awac('awac');
  awac.debug = true;
  awac.setOnRefresh(onRefresh);
  awac.setOnResult(onResult);
  var hasRoot = awac.get('has-root');
  $('#log').html('Welcome');
  log('has-root='+hasRoot);
  if (!hasRoot) {
    isRoot = true;
    awac.set('has-root','true');
    awac.setOnBackPressed(onBackPressed);
  }
  else {
     $('#finish-page').show();
  }
  log('last session started @ '+awac.load('last-sess'));
  var thisSess = (new Date()).format('HH:MM:ss');
  awac.store('last-sess',thisSess);
	log('this session started @ '+thisSess);
	awac.showPage();
}

$(document).ready(function() { init(); });
		</script>
	</head>
	<body>
	  <h1>Android WebApp Container Test Page</h1>
    <div onclick="newPage('home');" class="btn">New Page</div>
		<div id="log"></div>
		<div onclick="newPage('highline');" class="btn">High Line Park</div>
		<div id="finish-page" style="display:none;" class="btn" onclick="finishPage();">Finish Page</div>
	</body>
</html>