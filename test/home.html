<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link type="text/css" rel="stylesheet" href="../css/reset.css" />
		<style type="text/css">
body {
  background: #e2e2e2;
}

div#content, div.btn {
  width: 80%;
  margin-left: auto;
  margin-right: auto;
  margin-top: 20px;
  padding: 20px;
  background: white;
}

div.btn {
  text-align: center;
	background-color:#44c767;
	-moz-border-radius:8px;
	-webkit-border-radius:8px;
	border-radius:8px;
	border:1px solid #18ab29;
	cursor:pointer;
	color:#ffffff;
	font-family:arial;
	font-size:17px;
	text-decoration:none;
	text-shadow:0px 1px 0px #2f6627;
}

div.btn:hover {
	background-color:#5cbf2a;
}

div.btn:active {
	position:relative;
	top:1px;
}

		</style>
		<script src="../js/jquery.min.js" type="text/javascript"></script>
		<script src="../js/dateformat.js" type="text/javascript"></script>
		<script src="../js/awac.js" type="text/javascript"></script>
		<script type="text/javascript">
var awac = null;

function log(msg) {
  $('#content').append('<br/>'+msg+' @ '+(new Date()).format('HH:MM:ss [d mmm]'));
}

function onResult(ok) {
  log('result from page:'+ok);
}

function onRefresh() {
  log('page refreshed');
  awac.finishRefresh();
}

function newPage() {
  log('new page');
  awac.newPage('home');
}

function finishPage() {
  log('finish page');
  awac.finishPage();
}

function init() {
  awac = new Awac('awac');
  awac.onrefresh = onRefresh;
  awac.onresult = onResult;
  var hasRoot = awac.get('has-root');
  $('#content').html('Welcome');
  $('#content').append('<br/>has-root='+hasRoot);
  if (!hasRoot) {
    awac.set('has-root','true');
  }
  else {
     $('#finish-page').show();
  }
  $('#content').append('<br/>last session started @ '+awac.load('last-sess'));
  var thisSess = (new Date()).format('HH:MM:ss [d mmm]');
  awac.store('last-sess',thisSess);
	$('#content').append('<br/>this session started @ '+thisSess);
	awac.showPage();
}

$(document).ready(function() { init(); });
		</script>
	</head>
	<body>
	  <h1>Android WebApp Container Test Page</h1>
    <div onclick="newPage();" class="btn">New Page</div>
    <div id="finish-page" style="display:none;" class="btn" onclick="finishPage();">Finish Page</div>
		<div id="content"></div>
	</body>
</html>