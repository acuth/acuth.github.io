<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link type="text/css" rel="stylesheet" href="test.css" />
		<script src="../js/jquery.min.js" type="text/javascript"></script>
		<script src="../js/dateformat.js" type="text/javascript"></script>
		<script src="../js/awac.js?v=11" type="text/javascript"></script>
		<script src="test.js?v=11" type="text/javascript"></script>
		<script type="text/javascript">

var _awac = null;

function onRefresh() {
  document.getElementById('status').innerHTML = 'on-refresh handler has been called, waiting for 5s';
  setTimeout(function() {
    _awac.endRefresh();
    document.getElementById('status').innerHTML = 'on-refresh handler exiting';
    _awac.setTitle('Loaded @ '+(new Date()).format('HH:MM:ss'));
  }, 5000);
}

$(document).ready(function() {
  _awac = new Awac('_awac');
  _awac.setTitle('Loaded @ '+(new Date()).format('HH:MM:ss'));
  _awac.setOnRefresh(onRefresh);
  _awac.startPage();
  loadFooter();
}
		</script>
	</head>
	<body><div id="details"><div id="details-footer"/><div id="details-blurb">

       <div>In this example we create a global variable to represent Awac called _awac. The variable name must be supplied to the constructor to receive events.</div>
       <div class="code"><pre>
       _awac = new Awac('_awac');
       _awac.setOnRefresh(function(){
         ...
         _awac.endRefresh();
       });</pre></div>
       <div>Setting an on-refresh handler enables pull-to-refresh behaviour for the page.</div>
    </div><!-- end of details-blurb --></div><!-- end of details -->


     <div id="content">&nbsp;
        <p>This page is designed to display pull-to-refresh behaviour. Once refresh has been started, the page sleeps for 5s before updating the title of the page.</p>
        <div class="btn" onclick="_awac.startRefresh();">Start Refresh</div>
        <div class="btn" onclick="_awac.endRefresh();">End Refresh</div>
        <p id="status"></p>
     </div>


  </body>
</html>