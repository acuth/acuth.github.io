<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<title>YANG-Wiki</title>
		<link type="text/css" rel="stylesheet" href="fake_items.css" />
				<style type="text/css">
body {
  background: #e5e5e5;
}

div#signin {
  background: rgb(255,152,0);
}

div#signin div {
  width: 50%;
  margin-left: auto;
  margin-right: auto;
  padding-top: 40%;
  text-align: center;
}
		</style>	
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
		<script src="https://www.gstatic.com/firebasejs/live/3.0/firebase.js" type="text/javascript"></script>
		<script src="https://acuth.github.io/awac/awac.js" type="text/javascript"></script>
		<script src="fake_items.js" type="text/javascript"></script>
		<script type="text/javascript">
			var _awac = null;
			
			function onSignInOut(user) {
			  console.log('onSignInOut()');
			  if (user) {
			    console.log(' - user='+JSON.stringify(user));
			    document.getElementById('signin').setAttribute('style','display:none');
			    document.getElementById('account').setAttribute('style','display:block');
			    document.getElementById('name').innerHTML = 'You are signed in as <b>'+user.displayName+'</b> ('+user.email+')';
  			  document.getElementById('photo').setAttribute('src',user.photoURL);
  			  _awac.makeFBDBRequest('/users/'+user.uid+'/n_signin',false,function(nSignIn) {
			      document.getElementById('n-signin').innerHTML = '# of sign-ins ' +nSignIn;
			    });
			  }
			  else {
			    console.log(' - user=null');
			    document.getElementById('account').setAttribute('style','display:none');
			    document.getElementById('signin').setAttribute('style','display:block');
			    setTimeout(fixLayout,60);
			  }
			}
			
			function onAction(action) {
			  if ('signin' == action) _awac.signIn();
			  if ('signout' == action) _awac.signOut();
			  if ('back' == action) onBackPressed();
			  if ('skip' == action) _awac.replacePage('wizard','wizard3.html',null,true);
			}
			
			function fixLayout() {
			  //var header = $('#item-header');
			  var content = $('#signin');
			  var top = '0px';//header.height()+'px';
			  var height = _awac.getDims().height+'px';
			  console.log('top '+top);
			  console.log('height '+height);
			  content.show().css('top',top).css('height',height);
			}
			
			function addBtnClick(i,name) {
			   var btn = $('#btn'+i);
			   btn.click(function(event) {
			     console.log('show item '+name);
			     FItem.historyPush(_awac,name);
			     _awac.replacePage('show','show_item.html',{'item_id':name},true);
			   });
			   btn.html(name);
			}
			
			$(document).ready(function() {
			  _awac = new Awac('_awac');
			  _awac.setOnSignInOut(onSignInOut);
			  _awac.setOnAction(onAction);  
			  _awac.addNavDrawerItem({'label':'Sign in','action':'signin'});
			  _awac.addNavDrawerItem({'label':'Sign out','action':'signout'});
			  _awac.unlockNavDrawer();
			
			  addBtnClick(0,'HomePage');
			  addBtnClick(1,'MarkdownPage'); 

			  _awac.startPage();
			});
			</script>
	</head>
	<body>
	   
     <div id="signin" style="display:none;">
       <div>You need to <a href="javascript:onAction('signin');">sign in</a></div>
     </div>
     <div id="account" style="display:none;">
       <div style="background:rgb(255,152,0);color:white;padding:20px;">&nbsp;</div>
          <div class="card">
            <div><img id="photo" /></div>
            <div id="name" style="color:gray;"></div>
            <div id="n-signin" style="font-size:80%;color:gray;"></div>
          </div>
          <div class="card"><a id="btn0"></a></div>
          <div class="card"><a id="btn1"></a></div>
          <br/><br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/><br/>
          <br/><br/><br/><br/><br/><br/><br/>
          <div style="padding: 10px;font-size: 80%; color: gray;">the bottom of the page</div>
     </div>
	</body>
</html>