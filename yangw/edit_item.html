<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
		<link type="text/css" rel="stylesheet" href="fake_items.css" />	
		<style type="text/css">
		</style>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
		<script src="http://acuth.github.io/awac/awac.js" type="text/javascript"></script>
		<script src="fake_items.js" type="text/javascript"></script>
		<script type="text/javascript">
			var _awac = null;
			function onAction(action) {
			  if ('back' == action) 
			    _awac.endPage();
			  else if ('edit-markup' == action) 
			    _awac.openPage('edit-markup','edit_markdown.html',{'item_id':_itemId});
			  else 
			    _awac.alert('action '+action+' NYI');
			}
			
			var _itemId = -1;
			
			function fixEditLayout() {
			  var header = $('#edit-item-header');
			  var content = $('#edit-item-content');
			  var top = header.height()+'px';
			  var height = (_awac.getDims().height-header.height())+'px';
			  console.log('top '+top);
			  console.log('height '+height);
			  content.show().css('top',top).css('height',height);
			}
			
			$(document).ready(function() {
			  _awac = new Awac('_awac'); 
			  var initp = _awac.getInitParam();
			  if (initp) 
			    _itemId = initp.item_id;
			  else
			    _itemId = 'HasanUser';
			    
			 console.log('item-id='+_itemId);
			    
			 var colors = _awac.getColors();
			 if (colors) {
			    $('#edit-item-header').css('background',colors.primary_dark);
			    $('#item-title').css('color',colors.text_primary);
			 }
			  
			  _awac.setOnAction(onAction);
			  _awac.setOnBackPressed(function() { onAction('back'); });
			  _awac.setHomeItem({'label':'Back','icon':'close','action':'back'});
			
			  //_awac.addActionBarItem({'label':'DELETE','action':'delete'}); 
			  _awac.addActionBarItem({'label':'SAVE','action':'save'});
			
				FItem.get(_itemId,function(fitem) { 
				  var iname = fitem.getMDIcon();
				  var a = fitem.getUserHTML(fitem.json.author,true);
			    $('#item-author').html(a);
				  $('#item-title').html(fitem.json.name_attr);
				  $('#show-item-type').html('<i class="material-icons">'+iname+'</i>');
			    $('#edit-body-content').text(fitem.json.markdown).prop('readonly', true);
			    $('#edit-body-content-control').click(function(event) { onAction('edit-markup'); }); 
			    _awac.startPage();
			    setTimeout(fixEditLayout,60);
				});
			});
			</script>
	</head>
	<body>
     <div id="edit-item-header">
       <div id="item-title">-title-goes-here-</div>
     </div>
     <div id="edit-item-content">
      <div class="item-meta">
        <table><tr>
         <td><div id="show-item-type" class="item-type">?</div></td>
         <td id="item-author">-author-details-go-here-</td>
       </tr></table>
       </div>
       
       <table class="fields">
         <tr class="field">
           <td class="field-icon"><i class="material-icons">subject</i></td>
           <td class="field-value"><textarea id="edit-body-content" class="body-content">-item-markup-goes-here-</textarea></td>
           <td class="field-cntrl"><i id="edit-body-content-control" class="material-icons">edit</i></td>
           <td class="field-cntrl"><i id="delete-body-content-control" class="material-icons">delete</i></td>
        </tr>   
        
        <tr class="field">
           <td class="field-icon"><i class="material-icons">label</i></td>
           <td class="field-value">#android #funny</td>
           <td class="field-cntrl"><i class="material-icons">highlight_off</i></td>
        </tr>
        
        <tr class="field">
           <td class="field-icon"><i class="material-icons">check_box</i></td>
           <td class="field-value unset">Add to-do status</td>
        </tr> 
        
        <tr class="field">
           <td class="field-icon"><i class="material-icons">location_on</i></td>
           <td class="field-value unset">Add location</td>
        </tr> 
        
        <tr class="field">
           <td class="field-icon"><i class="material-icons">event</i></td>
           <td class="field-value unset">Add dates and times</td>
        </tr> 
        
        <tr class="field">
           <td class="field-icon"><i class="material-icons">attach_file</i></td>
           <td class="field-value unset">Attach a file</td>
        </tr> 
        
        <tr class="field">
           <td class="field-icon"><i class="material-icons">person</i></td>
           <td class="field-value unset">Connect to a person</td>
        </tr> 
        
        
     
        
        </table>
     </div>
	</body>
</html>