<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
		<link type="text/css" rel="stylesheet" href="fake_items.css" />	
		<style type="text/css">
		
img {
  max-width: 100%;
  height: auto;
}

div#show-item-content {
  background: yellow;
  width: 100%;
}

div#show-item-header {
  background: yellow;
  width: 100%;
}
		</style>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
		<script src="http://acuth.github.io/awac/awac.js" type="text/javascript"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/showdown/1.3.0/showdown.min.js" type="text/javascript"></script>
		<script src="fake_items.js" type="text/javascript"></script>
		<script type="text/javascript">
			var _awac = null;
			function onAction(action) {
			  if ('back' == action)
			    _awac.replacePage('root','index2.html',null,false);
			  else if ('edit' == action)
			    _awac.openPage('edit','edit_item.html',{'item_id':_itemId});
			  else if ('add' == action) {
			    var labels= ['add comment','add post','add event'];
			    var items = new Array();
			    for (var i=0;i<labels.length;i++) {
			      var item = new Object();
			      item.label = labels[i];
			      items[i] = item;
			    }
			    _awac.list(items,function(n) { if (n != -1) _awac.alert('selected '+n); });
			  }
			  else 
			    _awac.alert('action '+action+' NYI');
			}
			
			var _itemId = -1;
		
			
			function addBtnClick(i,j) {
			   var btn = $('#btn'+i);
			   btn.addClass('btn');
			   btn.click(function(event) {
			     console.log('show item '+_itemTitles[j]);
			     _awac.replacePage('show','show_item.html',{'item_id':j},true);
			   });
			   btn.html(_itemTitles[j]);
			}
			
			function renderItem(fitem) {
			  		   
			 var converter = new showdown.Converter();
       var html = converter.makeHtml(fitem.markdown);
			    
			 $('#item-title').html(fitem.json.title);
			 $('#item-author').html('<image class="img-circle" src="'+fitem.json.authors[0]+'.jpg" />');
			 $('#item-markdown').html(html);
			 
			 var colors = _awac.getColors();
			 if (colors) {
			    $('#item-title').css('color',colors.primary_dark);
			 }
			 
			 console.log('rendered item');
			}
			
			$(document).ready(function() {
			  _awac = new Awac('_awac'); 
			  var initp = _awac.getInitParam();
			  if (initp) 
			    _itemId = initp.item_id;
			  else
			    _itemId = 0;
			    
			  _awac.setOnAction(onAction);
			  _awac.unlockNavDrawer();
			   
			  //_awac.setHomeItem({'label':'Back','icon':'arrow_back','action':'back'});
			  _awac.addActionBarItem({'icon':'edit','label':'EDIT','action':'edit'});
			  _awac.addActionBarItem({'icon':'add','label':'ADD','action':'add'});
			  _awac.setOnBackPressed(function() { onAction('back'); });
			  
			  FItem.get('home',function(fitem) { 
			    renderItem(fitem);
			    _awac.startPage();
			  });   
			});
			</script>
	</head>
	<body>
     <div id="show-item-header">
       <div id="item-title">-title-goes-here-</div>
       <p>What happens if I puy a load of content here - will it get outside the page?
       This is what I need to know and need to know it now.</p>
     </div>
     <div id="show-item-content">
        <table><tr>
         <td><div class="item-type"><i class="material-icons">dashboard</i></div></td>
         <td id="item-author"></td>
         <td style="color:gray">@acuth<br/>Nov 5, 2015</td>
       </tr></table>
       <div id="item-markdown">-item-markup-goes-here-</div>
     </div>
	</body>
</html>